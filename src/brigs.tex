\subsection{Анализ проблем}

В своей статье Бриггс описывает модифицированный алгоритм раскраски графа, он называет его \textbf{optimistic coloring}.
Разберем какая именно проблема скрывается в выше описанных примерах, и как можно их решить.

В примере с рисунка~\ref{fig:ex2}, как уже было сказано, алгоритм Чайтина выгрузит какую-то переменную,
хотя очевидно что обойтись можно и без этого. Эта проблема связана с тем что по умолчанию алгоритм считает,
что если есть вершина графа со степенью большей $n$, то такой граф нельзя раскрасить в $n$ цветов.

В примере SVD разложения проблема возникает не когда алгоритм выбирает сгрузить переменные $i$ и $n$, а когда
после выгрузки $N$ и $M$ он не обнаруживает что переменные $n$ и $i$ вполне могут поместиться на регистры.
Несмотря на то, что сначала казалось иначе.

\subsection{Идея}

Для решения вышеперечисленных проблем Бриггс предлагает внести следующие корректировки в алгоритм Чайтина:

\begin{enumerate}
    \item В пункте~\ref{chatin_algo_spill} алгоритма, в случае обнаружения вершины у которой больше $n$ соседей,
    не будем сразу выгружать вершину, а положим ее на стек. \label{briggs_change_spill}
    \item Соответственно в пункте \ref{chatin_algo_color_assignment} возникает проблема, ведь теперь не всегда
    вершину можно будет покрасить. В этом случае оставим их не покрашенными, это те переменные которые нужно
    выгрузить.
    
\end{enumerate}

Эти изменения помогут решить проблемы алгоритма Чайтина. Первая проблема решается в пункте \ref{briggs_change_spill}.
Теперь в примере с рисунка \ref{fig:ex2} хотя некоторая вершина и будет выбрана для выгрузки, во время этапа \ref{chatin_algo_color_assignment}
всем вершинам удастся получить цвет.

Вторая проблема также решена. Теперь несмотря на то, что переменные $i, n, M, N$ будут выгружены (можно считать что в таком
порядке), при попытке подобрать цвета для $M, N$ станет понятно что подобрать для них цвета не получится.
Поэтому переменные $i, n$ не придется выгружать.

Эвристика предыдущего алгоритма скорее отвечала на
вопрос ``имеет ли вершина $< n$ соседей?'', чем на вопрос ``можно ли подобрать цвет для этой вершины?''. Новый
алгоритм дает ответ на последний вопрос.